const moment = require('moment');
require('moment-round');
const momentRandom = require('moment-random');

const tasteAdjectives = ["매운", "매콤한", "매콤달콤한", "맵고짠", "쌉쌀한", "씁쓸한", "쌉싸래한", "쓰디쓴", "새콤한", "새콤달콤한", "신", "시큼한", "감미로운", "달짝지근한", "달콤한", "구수한", "담백한", "맹맹한", "밍밍한", "삼삼한", "싱거운", "칼칼한"];
const names = ["가래떡", "가지나물", "간고등어", "간장", "갈비", "갈비탕", "감자튀기", "감자튀김", "닭강정", "계란덮밥", "계란말이", "고로케", "곰국", "광동요리", "국밥", "국수", "규동", "김밥", "김치", "김치찌개", "꿔바로우", "나박김치", "냉면", "닭갈비", "닭개장", "닭고기", "닭고기덮밥", "닭꼬치", "닭튀김", "도넛", "돈가스", "동치미", "된장찌개", "두부", "디저트", "땅콩과자", "떡", "떡국", "떡꼬치", "떡볶이", "라면", "라볶이", "마파두부", "만두", "묵", "바게트", "바비큐", "배추김치", "배춧국", "보쌈김치", "볶음밥", "부대찌개", "부침개", "불고기", "비빔밥", "빙수", "빵", "삼겹살", "삼계탕", "삼두음", "새우튀김", "샌드위치", "샐러드", "생강주", "생강즙", "생강차", "소갈비", "소불고기", "소시지", "송편", "소고기덮밥", "수란", "수프", "순대", "순두부찌개", "스파게티", "스시", "스테이크", "식빵", "식혜", "샌드위치", "아욱국", "알탕", "약과", "양갱", "양고기", "양장피", "어묵", "옥수수빵", "우동", "육개장", "육회", "인절미", "자장면", "잡채", "잡탕밥", "장어덮밥", "잼", "젓갈", "죽", "짜장면", "짬뽕", "찌개", "찐빵", "청국장", "초밥", "초콜릿", "총각김치", "추어탕", "치즈", "치킨", "카레", "칼국수", "케이크", "콩우유", "콩자반", "쿠키", "크래커", "크루아상", "탕수육", "토스트", "통구이", "통닭", "튀김", "파김치", "파스타", "파이", "파전", "팔보채", "팬케이크", "푸딩", "프라이드치킨", "피자", "필라프", "핫도그", "햄버거", "호떡", "회", "회덮밥"];
const latlng = [["37.56667","126.97806"],["35.17944","129.07556"],["37.45639","126.70528"],["35.87222","128.60250"],["37.39444","126.95556"],["36.35111","127.38500"],["35.15972","126.85306"],["37.26389","127.02861"],["35.53889","129.31667"],["35.22917","128.67500"],["37.65833","126.83056"],["37.44722","127.13750"],["37.24278","127.17889"],["37.50361","126.76611"],["37.32222","126.83083"],["36.64389","127.48944"],["35.82500","127.15000"],["36.81528","127.11389"],["37.63694","127.21694"],["37.19972","126.83139"],["36.01944","129.34167"],["35.22889","128.88944"],["36.48750","127.28167"],["37.38139","126.80278"],["36.99250","127.11306"],["37.73889","127.03444"],["33.50000","126.51667"],["37.76111","126.77778"],["36.11944","128.34472"],["37.47889","126.86444"],["35.18083","128.10778"],["37.34167","127.92083"],["35.95000","126.95833"],["37.70000","126.60000"],["34.76056","127.66222"],["37.36250","126.93333"],["35.96833","126.73722"],["34.95583","127.49028"],["35.85611","129.22472"],["35.33556","129.03778"],["36.79000","127.00194"],["35.82556","128.74167"],["37.75000","128.88333"],["34.88333","128.62500"],["36.99278","127.92611"],["37.59444","127.12972"],["37.27222","127.43500"],["36.80611","128.62417"],["37.15028","127.07750"],["37.00833","127.27500"],["36.56889","128.72944"],["36.78500","126.45056"],["37.89500","127.20056"],["33.25528","126.56111"],["37.54167","127.20972"],["36.14028","128.11250"],["37.34528","126.96889"],["35.56806","126.85139"],["36.18722","127.09889"],["34.85556","128.42917"],["36.60139","127.52639"],["36.89833","126.63083"],["36.44667","127.11972"],["35.00472","128.06556"],["35.97333","128.93861"],["37.08139","127.05000"],["35.01611","126.71083"],["35.50389","128.74667"],["36.33333","126.61306"],["35.99583","128.40000"],["36.41167","128.15972"],["37.30028","127.63889"],["35.24306","129.21944"],["37.52472","129.11417"],["36.68194","126.85000"],["36.27639","126.91111"],["35.80361","126.88083"],["38.20694","128.59194"],["36.60139","126.66083"],["35.41667","127.39056"],["34.61250","127.28333"],["37.49222","127.48778"],["37.90278","127.05833"],["37.41750","127.25639"],["35.06528","126.98500"],["36.58611","128.18611"],["35.43667","126.70306"],["35.27778","126.50944"],["37.45000","129.16500"],["37.42778","126.98889"],["36.35306","128.69722"],["37.69722","127.88889"],["35.68861","127.91222"],["34.31667","126.75000"],["37.71417","126.45250"],["34.80000","126.69583"],["36.75000","126.29778"],["35.27500","128.40833"],["38.38472","128.47361"],["35.54778","128.49306"]]
                .map(([lat, lng]) => [Number(lat), Number(lng)]);

function randomRadius() {
    return (Math.random() * 2 - 1) / 10;
}

exports.columnSchema = ['categoryId', 'name', 'price', 'latitude', 'longitude', 'expireDateTime', 'shareDateTime', 'isBowlNeeded'];

exports.generate = () => {
    const now = moment();

    const categoryId = Math.floor(Math.random() * 6 + 1);
    const name = `${tasteAdjectives[Math.floor(Math.random() * tasteAdjectives.length)]} ${names[Math.floor(Math.random() * names.length)]}`;
    const price = Math.floor(Math.random() * 500) * 100;
    const [latitude, longitude] = latlng[Math.floor(Math.random() * latlng.length)].map(val => (val + randomRadius()).toFixed(5));
    const expireDateTime = momentRandom(now, now.subtract(4, 'w')).ceil(10, 'minutes').format('YYYY-MM-DDTHH:mm');
    const shareDateTime = momentRandom(moment(expireDateTime).add(2, 'w').format('YYYY-MM-DDTHH:mm'), expireDateTime)
                            .ceil(10, 'minutes').format('YYYY-MM-DDTHH:mm');
    const isBowlNeeded = Math.random() > 0.5;

    return {
        categoryId,
        name,
        price,
        latitude,
        longitude,
        expireDateTime,
        shareDateTime,
        isBowlNeeded
    }
};